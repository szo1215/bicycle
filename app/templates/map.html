{% extends "layout.html" %}
{% block title %} map {% endblock %}
{% block head %}
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyACtYXfgytJqOg762NyUUxmjJbw7Fppl1I"></script>
  <script src="{{url_for('static', filename='gmaps.js')}}"></script>
  <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='map.css')}}">
  <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap-3.3.5-dist/css/bootstrap.min.css') }}">
  <link rel="stylesheet" href="{{url_for('static', filename='web.css')}}">
{% endblock %}
{% block body %}
<div class="container">
  <nav class="navbar navbar-default"></nav>
  <div class="column_left">
    <div id="map"></div>
  </div>
  <div class="column_right">
    <table class="table riding-info">
      <tr>
        <th>마지막 라이딩 정보<th>
      </tr>
      <tr>
        <th>평균속도</th>
        <td>20km/h</td>
      </tr>
      <tr>
        <th>거리</th>
        <td>20KM</td>
      </tr>
      <tr>
        <th>날짜</th>
        <td>2015. 01. 01</td>
      </tr>
    </table>
    <table class="table riding-info">
      <tr>
        <th>같은 구간 순위<th>
      </tr>
      <tr>
        <th>평균속도</th>
        <td>20km/h</td>
      </tr>
      <tr>
        <th>거리</th>
        <td>20KM</td>
      </tr>
      <tr>
        <th>날짜</th>
        <td>2015. 01. 01</td>
      </tr>
    </table>
    <table class="table riding-info">
      <tr>
        <th>나의 순위<th>
      </tr>
      <tr>
        <th>순위</th>
        <td>20km/h</td>
      </tr>
      <tr>
        <th>거리</th>
        <td>20KM</td>
      </tr>
      <tr>
        <th>날짜</th>
        <td>2015. 01. 01</td>
      </tr>
    </table>
  </div>
</div>
  <script>
    $(document).ready(function() {
      var map = new GMaps({
          el: '#map',
          lat: 37.566609,
          lng: 126.978435,
          zoom: 14,
      });

      $.ajax({
        type:'GET',
        url:"http://localhost:5000/last_riding_info",
      }).done(
        function(data) {
          var path = data.tracking;

          map.drawPolyline({
            path: path,
            strokeColor: '#131540',
            strokeOpacity: 0.6,
            strokeWeight: 6
          });
        }
      ).fail(
        function(error) {
        }
      );
    });
  </script>
{% endblock %}
